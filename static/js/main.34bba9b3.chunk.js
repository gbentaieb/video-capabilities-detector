(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,r){},161:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"drm",function(){return g}),r.d(n,"maxBandwidth",function(){return M}),r.d(n,"browser",function(){return B});var a=r(0),c=r.n(a),o=r(64),u=r.n(o),i=(r(79),r(13)),s=r(14),d=r(16),p=r(15),l=r(17),m=r(11),f=r(71),h=r.n(f),y=r(72),v=r.n(y),b=r(73),w=r.n(b),C=r(24),S=r(23),x=r(6),O="SET_DRM_PROPERTIES",k="SET_MAX_BANDWIDTH",E="SET_BROWSER_PROPERTIES",j={drmName:null,drmSecurity:null,hdcpLevel:null,drmCanPersistState:null};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case O:return Object(x.a)({},e,{drmName:t.payload.drmName,drmSecurity:t.payload.drmSecurity,hdcpLevel:t.payload.hdcpLevel,drmCanPersistState:t.payload.drmCanPersistState});default:return e}}var P={protectedContent:null,unprotectedContent:null};function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case k:return Object(x.a)({},e,{protectedContent:t.payload.protectedContent,unprotectedContent:t.payload.unprotectedContent});default:return e}}var L={name:null,version:null,os:null,recommended:null,supportedCodecs:null};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case E:return Object(x.a)({},e,{name:t.payload.name,version:t.payload.version,os:t.payload.os,recommended:t.payload.recommended,supportedCodecs:t.payload.supportedCodecs});default:return e}}var N=Object(S.b)(n),_=Object(S.c)(N,{}),R=r(68),T=r.n(R),D=r(70),W=r.n(D),U=r(67),K=r.n(U),H=r(69),q=r.n(H),A=r(48),F=r.n(A),I=r(46),V=r.n(I);function Y(e){switch(e){case null:return null;case"none":return"Not supported";default:return"Up to ".concat(e)}}var J=r(66),X=Object(J.detect)(),z={avc:'video/mp4; codecs="avc1"',hevc:'video/mp4; codecs="hvc1"',vp8:'video/mp4; codecs="vp08"',vp9:'video/mp4; codecs="vp09.00.50.08"',av1:'video/mp4; codecs="av01.0.08M.08"'};function $(){var e=X||{};return{name:e.name,version:e.version,os:e.os,recommended:function(e){switch(e?e.split(" ")[0]:null){case"iOS":case"Mac":return"Safari";case"Windows":return"Edge";case"Linux":return"Firefox";default:return"Chrome"}}(X.os),supportedCodecs:function(){var e=document.createElement("video");return e.canPlayType?Object.keys(z).reduce(function(t,r){return e.canPlayType(z[r])?t.concat([r]):t},[]).join(", "):"none"}()}}var G=Object(C.withStyles)(function(e){return{head:{backgroundColor:e.palette.primary.light,color:e.palette.common.white},body:{fontSize:14}}})(K.a),Q=0;function Z(e,t){return{id:Q+=1,name:e,value:t}}var ee=function(e){return[Z("Drm Name",e.drmName),Z("Drm Security",e.drmSecurity),Z("Supported HDCP level",e.hdcpLevel),Z("Persistent state enabled (can be used for tracking purposes)",e.drmCanPersistState),Z("Supported codecs",(t=e.supportedCodecs,"none"===t?"Unable to detect":t)),Z("Maximum quality for unprotected content (eg. Youtube)",Y(e.unprotectedContentMaxBandwidth)),Z("Maximum quality for protected content (eg. Netflix)",Y(e.protectedContentMaxBandwidth)),Z("Recommended browser",e.recommendedBrowser)];var t};var te=Object(C.withStyles)(function(e){return{root:{marginTop:3*e.spacing.unit,marginLeft:5,marginRight:5,overflowX:"auto"},table:{width:"100%"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}}}})(function(e){var t=e.classes,r=ee(e);return c.a.createElement(V.a,{className:t.root},c.a.createElement(T.a,{className:t.table},c.a.createElement(q.a,null,c.a.createElement(F.a,null,c.a.createElement(G,null,"Property"),c.a.createElement(G,null,"Value"))),c.a.createElement(W.a,null,r.map(function(e){return c.a.createElement(F.a,{className:t.row,key:e.id},c.a.createElement(G,{component:"th",scope:"row"},e.name),c.a.createElement(G,null,e.value||"..."))}))))});var re=Object(m.b)(function(e){return{drmName:e.drm.drmName,drmSecurity:e.drm.drmSecurity,drmCanPersistState:e.drm.drmCanPersistState,hdcpLevel:e.drm.hdcpLevel,protectedContentMaxBandwidth:e.maxBandwidth.protectedContent,unprotectedContentMaxBandwidth:e.maxBandwidth.unprotectedContent,recommendedBrowser:e.browser.recommended,supportedCodecs:e.browser.supportedCodecs}})(function(e){return c.a.createElement(te,e)}),ne=r(2),ae=r.n(ne),ce=r(7),oe=r(32),ue=["com.microsoft.playready.hardware","com.chromecast.playready.hardware","com.youtube.playready.hardware","com.microsoft.playready.software","com.chromecast.playready.software","com.youtube.playready.software","com.microsoft.playready","com.chromecast.playready","com.youtube.playready"],ie=["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],se=["2.3","2.2","2.1","2.0","1.4","1.3","1.2","1.1","1.0"],de={drmName:"none",drmSecurity:"none",hdcpLevel:"Unable to detect"};function pe(e,t){return le.apply(this,arguments)}function le(){return(le=Object(ce.a)(ae.a.mark(function e(t,r){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.requestMediaKeySystemAccess(t,r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this,[[0,6]])}))).apply(this,arguments)}function me(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(ce.a)(ae.a.mark(function e(t){var r,n;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("getStatusForPolicy"in t){e.next=2;break}return e.abrupt("return","Unable to detect");case 2:r=0;case 3:if(!(r<se.length)){e.next=19;break}return n=se[r],e.prev=5,e.next=8,t.getStatusForPolicy({minHdcpVersion:"hdcp-".concat(n)});case 8:if("usable"!==e.sent){e.next=11;break}return e.abrupt("return",n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.warn("Error while detecting support for hdcp version: ".concat(n),e.t0);case 16:r+=1,e.next=3;break;case 19:return e.abrupt("return","none");case 20:case"end":return e.stop()}},e,this,[[5,13]])}))).apply(this,arguments)}function he(){return ye.apply(this,arguments)}function ye(){return(ye=Object(ce.a)(ae.a.mark(function e(){var t,r;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.MSMediaKeys){e.next=2;break}return e.abrupt("return","none");case 2:t=0;case 3:if(!(t<se.length)){e.next=11;break}if(r=se[t],"maybe"!==window.MSMediaKeys.isTypeSupportedWithFeatures("com.microsoft.playready",'video/mp4;features="hdcp='.concat(r,'"'))){e.next=8;break}return e.abrupt("return",r);case 8:t+=1,e.next=3;break;case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function ve(e){var t=[],r=[];return function(e){return"widevine"===e?ie:[void 0]}(e).forEach(function(e){t.push({contentType:'video/mp4;codecs="avc1.4d401e"',robustness:e}),r.push({contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:e})}),[{initDataTypes:["cenc"],videoCapabilities:t,audioCapabilities:r,persistentState:"required"},{initDataTypes:["cenc"],videoCapabilities:t,audioCapabilities:r}]}function be(e){return{drmName:"widevine",drmSecurity:"HW_SECURE_ALL"===e.videoCapabilities[0].robustness?"hardware":"software",drmCanPersistState:"required"===e.persistentState?"yes":"no",hdcpLevel:e.hdcpLevel}}function we(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(ce.a)(ae.a.mark(function e(){var t,r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve("widevine");case 2:return t=e.sent,e.next=5,pe("com.widevine.alpha",t);case 5:if(r=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,r.createMediaKeys();case 10:return n=e.sent,e.next=13,me(n);case 13:return a=e.sent,e.abrupt("return",Object(x.a)({},r,r.getConfiguration(),{hdcpLevel:a}));case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Se(){return xe.apply(this,arguments)}function xe(){return(xe=Object(ce.a)(ae.a.mark(function e(){var t,r,n,a,c,o;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<ue.length)){e.next=23;break}return e.next=4,ve("playready");case 4:return r=e.sent,n=ue[t],e.next=8,pe(n,r);case 8:if(!(a=e.sent)){e.next=20;break}return e.next=12,a.createMediaKeys();case 12:return c=e.sent,e.next=15,me(c);case 15:return e.sent,e.next=18,he();case 18:return o=e.sent,e.abrupt("return",Object(x.a)({},a,a.getConfiguration(),{keySystem:n,hdcpLevel:o}));case 20:t+=1,e.next=1;break;case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Oe(){return ke.apply(this,arguments)}function ke(){return(ke=Object(ce.a)(ae.a.mark(function e(){var t;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.WebKitMediaKeys,"com.apple.fps.1_0",t&&t.isTypeSupported&&t.isTypeSupported("com.apple.fps.1_0","video/mp4")){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{drmName:"fairplay",drmSecurity:"hardware",drmCanPersistState:"yes",hdcpLevel:"Unable to detect"});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ee(){return je.apply(this,arguments)}function je(){return(je=Object(ce.a)(ae.a.mark(function e(){var t,r,n,a;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Se(),we()]);case 2:if(t=e.sent,r=Object(oe.a)(t,2),n=r[0],a=r[1],!n){e.next=10;break}return e.abrupt("return",{drmName:"playready",drmSecurity:(c=n).keySystem.includes("hardware")?"hardware":"software",drmCanPersistState:"required"===c.persistentState?"yes":"no",hdcpLevel:c.hdcpLevel});case 10:if(!a){e.next=12;break}return e.abrupt("return",be(a));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}var c},e,this)}))).apply(this,arguments)}function ge(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(ce.a)(ae.a.mark(function e(){var t;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,Ee();case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=de;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Me=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.detectDrmProperties()}},{key:"detectDrmProperties",value:function(){var e=Object(ce.a)(ae.a.mark(function e(){var t;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge();case 2:t=e.sent,this.props.setDrmProperties(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}(a.Component);var Le=Object(m.b)(null,{setDrmProperties:function(e){return{type:O,payload:e}}})(function(e){return c.a.createElement(Me,e)}),Be=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,r=t.drmName,n=t.drmSecurity,a=t.hdcpLevel,c=t.drmCanPersistState;if(r!==e.drmName||n!==e.drmSecurity||a!==e.hdcpLevel||c!==e.drmCanPersistState){var o=this.getMaxBandwidth(e);o&&this.props.setMaxBandwidth(o)}}},{key:"getMaxBandwidth",value:function(e){var t=e.drmName,r=e.drmSecurity,n=e.hdcpLevel,a=e.drmCanPersistState;if(t&&r&&n&&a){var c={unprotectedContent:"4k",protectedContent:"none"};if("no"===a)return c;switch(t){case"fairplay":return Object(x.a)({},c,{protectedContent:"1080p"});case"playready":return Object(x.a)({},c,{protectedContent:this.getPlayreadyProtectedContentMaxBandwidth(r,n)});case"widevine":return Object(x.a)({},c,{protectedContent:"hardware"===r?"1080p":"720p"});default:return c}}}},{key:"getPlayreadyProtectedContentMaxBandwidth",value:function(e,t){var r=t.split("."),n=Object(oe.a)(r,2),a=n[0],c=n[1];return"hardware"===e&&(+a>=3||2===+a&&+c>=2)?"4K":"hardware"===e?"1080p":"720p"}},{key:"render",value:function(){return null}}]),t}(a.Component);var Ne=Object(m.b)(function(e){return{drmName:e.drm.drmName,drmSecurity:e.drm.drmSecurity,hdcpLevel:e.drm.hdcpLevel,drmCanPersistState:e.drm.drmCanPersistState}},{setMaxBandwidth:function(e){return{type:k,payload:e}}})(function(e){return c.a.createElement(Be,e)}),_e=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.detectBrowserProperties()}},{key:"detectBrowserProperties",value:function(){var e=Object(ce.a)(ae.a.mark(function e(){var t;return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:t=e.sent,this.props.setBrowserProperties(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}(a.Component);var Re=Object(m.b)(null,{setBrowserProperties:function(e){return{type:E,payload:e}}})(function(e){return c.a.createElement(_e,e)}),Te=(r(155),function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes.typography;return c.a.createElement(m.a,{store:_},c.a.createElement("div",{className:"App"},c.a.createElement(h.a,{position:"sticky"},c.a.createElement(v.a,null,c.a.createElement(w.a,{variant:"h6",color:"inherit",classes:{root:e}},"Video Capabilities Detector"))),c.a.createElement(re,null),c.a.createElement(Le,null),c.a.createElement(Ne,null),c.a.createElement(Re,null)))}}]),t}(a.Component)),De=Object(C.withStyles)({typography:{margin:"auto"}})(Te);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(De,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},74:function(e,t,r){e.exports=r(161)},79:function(e,t,r){}},[[74,2,1]]]);
//# sourceMappingURL=main.34bba9b3.chunk.js.map